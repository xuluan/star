// Generated by CoffeeScript 1.6.3
(function() {
  this.ArticlesController = function($scope, $routeParams, $location, Articles, ArticlesArchive) {
    $scope.articles = ArticlesArchive.getArticles();
    $scope.create = function() {
      var article;
      article = new Articles({
        title: this.article.title,
        content: this.article.content
      });
      return article.$save(function(response) {
        console.log(response);
        ArticlesArchive.reset();
        return $location.path("articles/");
      });
    };
    $scope.findOne = function() {
      if ($scope.articles[$routeParams.articleId]) {
        return $scope.article = $scope.articles[$routeParams.articleId];
      }
    };
    $scope.save = function() {
      if ($scope.article._id) {
        return $scope.update();
      } else {
        return $scope.create();
      }
    };
    $scope.update = function() {
      var article;
      article = $scope.article;
      return article.$update(function() {
        ArticlesArchive.reset();
        return $location.path('articles/');
      });
    };
    return $scope.remove = function(idx) {
      var article;
      if (!confirm("Do you want to remove it?")) {
        return;
      }
      article = $scope.articles[idx];
      return article.$delete(function(response) {
        console.log(response);
        ArticlesArchive.reset();
        return $location.path("articles/");
      });
    };
  };

}).call(this);
